CREATE DATABASE CASSINO_ONLINE;

USE CASSINO_ONLINE;

CREATE TABLE USUARIOS (
   ID INT AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(255) UNIQUE NOT NULL,
    SENHA VARCHAR(255) NOT NULL,
    FOTO_PERFIL VARCHAR(255),
    CONTA_RECUPERACAO VARCHAR(255),
    TIPO_CONTA ENUM('GRÁTIS', 'NORMAL', 'PREMIUM', 'DIAMANTE') NOT NULL,
    CONQUISTAS TEXT,
    DATA_CRIACAO TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    DATA_ATUALIZACAO TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP

CREATE TABLE TIPOS_JOGOS (
   ID INT AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(255) NOT NULL,
    DESCRICAO TEXT,
    NUMERO_CARTAS INT,
    JOGADORES_POR_JOGO INT,
    TIPO_CARTAS ENUM('PARES', 'ÍMPARES', 'PERSONALIZADAS', 'BLACKJACK', 'ROLETA', 'PÔQUER') NOT NULL
);

CREATE TABLE TRANSACOES (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    ID_USUARIO INT,
    METODO_PAGAMENTO ENUM('PIX', 'TRANSAÇÃO', 'MASTERCARD', 'WALLET') NOT NULL,
    VALOR DECIMAL(10, 2) NOT NULL,
    DATA_TRANSACAO TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID)
);

CREATE TABLE RECOMPENSAS (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    ID_USUARIO INT,
    TIPO_RECOMPENSA VARCHAR(255) NOT NULL,
    DESCRICAO TEXT,
    VALOR DECIMAL(10, 2),
    DATA_ATIVACAO TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID)
);

CREATE TABLE PROMOCOES (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    DESCRICAO TEXT NOT NULL,
    TIPO_PROMO VARCHAR(255),
    VALOR_BONUS DECIMAL(10, 2),
    DATA_INICIO TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    DATA_FIM TIMESTAMP,
    ATIVO BOOLEAN DEFAULT TRUE
);

CREATE TABLE DESAFIOS (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    ID_USUARIO INT,
    DESCRICAO TEXT NOT NULL,
    STATUS ENUM('PENDENTE', 'CONCLUÍDO', 'EXPIRADO') DEFAULT 'PENDENTE',
    DATA_INICIO TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    DATA_FIM TIMESTAMP,
    DESCONTO_PERCENTUAL DECIMAL(5, 2),
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID)
);

CREATE TABLE SESSOES (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    ID_USUARIO INT,
    METODO_LOGIN ENUM('GMAIL', 'FACEBOOK', 'INSTAGRAM') NOT NULL,
    VERIFICADO_ROBÔ BOOLEAN DEFAULT FALSE,
    DATA_LOGIN TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID)
);

CREATE TABLE JOGOS (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    ID_USUARIO INT,
    ID_TIPO_JOGO INT,
    RESULTADO VARCHAR(255),
    DATA_JOGO TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID),
    FOREIGN KEY (ID_TIPO_JOGO) REFERENCES TIPOS_JOGO(ID)
);

CREATE TABLE CONFIGURACOES_SEGURANÇA (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    ID_USUARIO INT,
    CONTA_RECUPERACAO VARCHAR(255),
    VERIFICADO_ROBÔ BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID)
);

CREATE TABLE PAGAMENTOS (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    ID_USUARIO INT,
    VALOR_PAGO DECIMAL(10, 2),
    METODO_PAGAMENTO ENUM('PIX', 'TRANSAÇÃO', 'MASTERCARD', 'WALLET') NOT NULL,
    DATA_PAGAMENTO TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID)
);

CREATE TABLE NOTIFICACOES (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    ID_USUARIO INT,
    MENSAGEM TEXT NOT NULL,
    TIPO_NOTIFICACAO ENUM('VITÓRIA', 'PROMOÇÃO', 'DESAFIO') NOT NULL,
    LIDA BOOLEAN DEFAULT FALSE,
    DATA_NOTIFICACAO TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID)
);

CREATE TABLE MANUTENCAO (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    ID_USUARIO INT,
    DESCRICAO TEXT NOT NULL,
    DATA_MANUTENCAO TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID)
);
